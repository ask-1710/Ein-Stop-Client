{"ast":null,"code":"var _jsxFileName = \"/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/graphs/graph1.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport SalesDataService from '../../services/sales.js';\nimport dayjs from 'dayjs';\nimport { Chart } from \"react-google-charts\";\nimport { Link, Routes, Route } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Graph1 = props => {\n  _s();\n\n  const [sales, setSales] = React.useState([]);\n  const [dataForPiePlot, setdataForPiePlot] = useState(null);\n  const [store, setStore] = useState('Austin');\n  const [locations, setLocations] = React.useState([]);\n  const [noData, setNoData] = React.useState();\n  useEffect(() => {\n    retrieveLocations();\n    fetchInitialData();\n  }, []);\n\n  const retrieveLocations = () => {\n    SalesDataService.getStoreLocations().then(response => {\n      // console.log(response.data);\n      setLocations(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const calculateQuantityItems = () => {\n    var items = {};\n    sales.map(element => {\n      element.items.map(item => {\n        items[item.name] = items[item.name] ? items[item.name] + parseInt(item.quantity) : parseInt(item.quantity);\n      });\n    });\n    var ratios = [['Category', 'Quantity sold']];\n    var objectKeysArray = Object.keys(items);\n    objectKeysArray.forEach(objKey => {\n      var objValue = items[objKey]; // objVal holds quantity of each item\n\n      var ration = [objKey, objValue];\n      ratios.push(ration);\n    });\n    return ratios;\n  };\n\n  const fetchInitialData = () => {\n    SalesDataService.find(store, \"location\").then(response => {\n      setSales(response.data.Sales);\n    }).catch(e => {\n      setNoData(true);\n      console.log(e);\n    });\n  };\n\n  const DisplayPieChart = () => {\n    fetchInitialData();\n    const series = calculateQuantityItems();\n    setdataForPiePlot(series);\n  };\n\n  const OnChangeSetStore = e => {\n    setStore(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-group container\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        class: \"form-control selectinput centre\",\n        type: \"select\",\n        onChange: OnChangeSetStore,\n        children: locations.map(method => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: method,\n            children: [\" \", method, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 23\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"input-group-addon btn btn-outline-dark\",\n        onClick: DisplayPieChart,\n        children: \"Analyse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row py-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: dataForPiePlot ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"jumbotron jumbotron-fluid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              class: \"display-6\",\n              children: [\"Sales % Of Items in \", store]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Chart, {\n          className: \"centre-chart\",\n          width: '800px',\n          height: '600px',\n          chartType: \"PieChart\",\n          loader: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading Chart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this),\n          data: dataForPiePlot,\n          options: {\n            title: `Percentage of items Sold in ${store}`,\n            pieSliceText: \"label\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"jumbotron jumbotron-fluid centre-text\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"display-6\",\n            children: \"Sales % Of Items in A store\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"lead text-italics\",\n            children: \"Select a store\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Graph1, \"eZ1OhB7vxw9VgD2OR44A5s8gz9U=\");\n\n_c = Graph1;\nexport default Graph1;\n\nvar _c;\n\n$RefreshReg$(_c, \"Graph1\");","map":{"version":3,"sources":["/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/graphs/graph1.component.js"],"names":["React","useEffect","useState","SalesDataService","dayjs","Chart","Link","Routes","Route","Graph1","props","sales","setSales","dataForPiePlot","setdataForPiePlot","store","setStore","locations","setLocations","noData","setNoData","retrieveLocations","fetchInitialData","getStoreLocations","then","response","data","catch","e","console","log","calculateQuantityItems","items","map","element","item","name","parseInt","quantity","ratios","objectKeysArray","Object","keys","forEach","objKey","objValue","ration","push","find","Sales","DisplayPieChart","series","OnChangeSetStore","target","value","method","title","pieSliceText"],"mappings":"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","sourcesContent":["import React, { useEffect , useState } from 'react';\nimport SalesDataService from '../../services/sales.js' ;\nimport dayjs from 'dayjs' ;\nimport { Chart } from \"react-google-charts\";\nimport {Link,Routes,Route} from 'react-router-dom';\n\nconst Graph1 = props => {\n\n  const [sales, setSales] = React.useState([])\n  const [dataForPiePlot, setdataForPiePlot] = useState(null)\n  const [store, setStore] = useState('Austin')\n  const [locations, setLocations] = React.useState([])\n  const [noData, setNoData] = React.useState()\n\n    useEffect(() => {\n      retrieveLocations();\n      fetchInitialData();\n    }, []);\n    \n    const retrieveLocations = () => {\n        SalesDataService.getStoreLocations()\n        .then(response => {\n        // console.log(response.data);\n        setLocations(response.data);\n        })\n        .catch(e => {\n        console.log(e);\n        });\n    }\n\n    const calculateQuantityItems = () => {\n               \n        var items = {}\n        \n        sales.map(element => {\n\n            element.items.map(item => {\n              \n              items[item.name]=(items[item.name] ? items[item.name]+parseInt(item.quantity) : parseInt(item.quantity))\n\n            })\n        });\n\n        var ratios = [['Category','Quantity sold']]\n        var objectKeysArray = Object.keys(items)\n        objectKeysArray.forEach((objKey) => {\n            var objValue = items[objKey]\n            // objVal holds quantity of each item\n            var ration = [objKey, objValue]\n            ratios.push(ration)\n        })\n        \n        return ratios\n    }\n\n    const fetchInitialData = () => {\n      SalesDataService.find(store, \"location\")\n                .then(response => {       \n                    setSales(response.data.Sales) \n                })\n                .catch(e => {\n                  setNoData(true);\n                    console.log(e);\n                })\n    }\n\n    const DisplayPieChart = () => {\n        fetchInitialData()\n        const series = calculateQuantityItems()\n        setdataForPiePlot(series)                    \n    }\n\n    const OnChangeSetStore = e => {\n        setStore(e.target.value)\n    }\n\n    return (\n        <div className='wrapper'>\n            <div className=\"input-group container\">\n            {/* <label class=\"input-group-prepend black-border centre col-1\" for=\"formWhite2\">Location</label> */}\n            <select class=\"form-control selectinput centre\" type='select'  onChange={OnChangeSetStore}>\n                {\n                  locations.map(method => {\n                    return (\n                      <option value={method}> {method} </option>\n                    )\n                  })\n                }\n              </select>\n              <button className=\"input-group-addon btn btn-outline-dark\" onClick={DisplayPieChart}>Analyse</button>          \n          </div>\n        <div className='row py-4'></div>\n        <div>\n        {\n            dataForPiePlot?(\n          <div className='container'>\n              <div class=\"jumbotron jumbotron-fluid\">\n              <div class=\"container\">\n                <h1 class=\"display-6\">Sales % Of Items in {store}</h1>\n              </div>\n            </div>\n            <Chart\n              className='centre-chart'\n                width={'800px'}\n                height={'600px'}\n                chartType=\"PieChart\"\n                loader={<div>Loading Chart</div>}\n                data={dataForPiePlot}\n                options={{\n                  title: `Percentage of items Sold in ${store}`,\n                  pieSliceText: \"label\"\n                }}\n              />\n            </div>) :\n            <div class=\"jumbotron jumbotron-fluid centre-text\">\n              <div class=\"container\">\n                <h1 class=\"display-6\">Sales % Of Items in A store</h1>\n                <p class=\"lead text-italics\">Select a store</p>\n              </div>\n            </div>\n        }\n        </div>\n      </div>\n    )\n}\n\nexport default Graph1"]},"metadata":{},"sourceType":"module"}