{"ast":null,"code":"var _jsxFileName = \"/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/management.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, Routes, Route } from 'react-router-dom';\nimport StoresDataService from '../services/stores.js';\nimport SalesDataService from '../services/sales.js';\nimport priceFormatter from '../services/priceFormatter.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ManagementTools = props => {\n  _s();\n\n  const [stores, setStores] = useState([]);\n  const [numStores, setNumStores] = useState(0);\n  const [currStore, setCurrStore] = useState(0);\n  const [revenue, setRevenue] = useState([]);\n  const [saved, setSaved] = useState();\n  const [details, setDetails] = useState([]);\n  const [displayDetails, setDisplayDetails] = useState([]);\n  const [ranks, setRanks] = useState([]);\n  useEffect(() => {\n    retrieveLocations();\n    retrieveSales();\n  }, [saved]);\n\n  const reload = () => {\n    setSaved(false);\n  };\n\n  const retrieveSales = () => {\n    if (stores.length > 0) {\n      var listRevenue = [];\n      var listStores = [];\n      stores.forEach(loc => {\n        SalesDataService.find(loc, \"location\").then(res => {\n          const sales = res.data.Sales;\n          var revenuel = 0.0;\n          sales.forEach(sale => {\n            sale.items.forEach(item => {\n              revenuel += parseInt(item.quantity) * item.price['$numberDecimal'];\n            });\n          });\n\n          if (listRevenue.length === 0) {\n            listRevenue = [revenuel];\n            listStores = [loc];\n          } else {\n            listStores.splice(listRevenue.length, 0, loc);\n            listRevenue.splice(listRevenue.length, 0, revenuel);\n          }\n\n          details.forEach(det => {\n            if (det.location === loc) {\n              const sales = listRevenue.at(-1);\n              const rent = det.rent['$numberDecimal'];\n              const staff = parseInt(det.numStaff);\n              const area = parseInt(det.area);\n              const ROTE = sales / staff;\n              const salespa = sales / area;\n              const val = R;\n            }\n          });\n\n          if (listRevenue.length === numStores) {\n            setStores(listStores);\n            setRevenue(listRevenue);\n            retrieveDetails();\n          }\n        }).catch(e => {\n          console.log(e.message);\n        });\n      });\n    }\n  };\n\n  const retrieveLocations = () => {\n    StoresDataService.getStores().then(res => {\n      const data = res.data.Stores;\n      const names = data.map(store => {\n        return store.location;\n      });\n      setDetails(data);\n      setStores(names);\n      setNumStores(res.data.Stores.length);\n      reload();\n    }).catch(e => {\n      console.log(e.message);\n    });\n  };\n\n  const nextStore = e => {\n    const next = (currStore + 1) % numStores;\n    setCurrStore(next);\n    retrieveDetails();\n  };\n\n  const prevStore = e => {\n    const prev = currStore > 0 ? currStore - 1 : numStores - 1;\n    setCurrStore(prev);\n    retrieveDetails();\n  };\n\n  const retrieveDetails = () => {\n    details.map(det => {\n      if (det.location === stores[currStore]) {\n        setDisplayDetails(det);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row py-5\",\n      children: [\" \", props.loggedIn ? stores ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"16\",\n              height: \"16\",\n              fill: \"currentColor\",\n              class: \"bi bi-caret-left-fill\",\n              viewBox: \"0 0 16 16\",\n              onClick: prevStore,\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-centre\",\n              children: revenue.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: stores[currStore]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: revenue[currStore]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 51\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-lg-4 pb-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card bg-dark text-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"card-body p-5 text-centre\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"mb-md-5 mt-md-4 pb-5\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                          class: \"fw-bold mb-2 text-uppercase\",\n                          children: \"STATS\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 136,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"form-outline form-white mb-8\",\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                              children: \"Revenue : $\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 139,\n                              columnNumber: 37\n                            }, this), priceFormatter(parseInt(revenue[currStore])) + '\\n', /*#__PURE__*/_jsxDEV(\"strong\", {\n                              children: \"Number of Staff : \"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 140,\n                              columnNumber: 37\n                            }, this), parseInt(displayDetails.numStaff) + '\\n', /*#__PURE__*/_jsxDEV(\"strong\", {\n                              children: \"ROTE ($/staff) :\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 141,\n                              columnNumber: 37\n                            }, this), \" \", priceFormatter(parseInt(revenue[currStore] / parseInt(displayDetails.numStaff))) + '\\n', /*#__PURE__*/_jsxDEV(\"strong\", {\n                              children: \"Sales/Area($/sqft) :\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 142,\n                              columnNumber: 37\n                            }, this), priceFormatter(parseInt(revenue[currStore] / displayDetails.area))]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 137,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"form-outline form-white mb-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 145,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 21\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"16\",\n              height: \"16\",\n              fill: \"currentColor\",\n              class: \"bi bi-caret-right-fill\",\n              viewBox: \"0 0 16 16\",\n              onClick: nextStore,\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Not yet Loaded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"jumbotron jumbotron-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"display-4\",\n            children: \"Log In to continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"lead\",\n            children: [\"Head on to \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/supply\",\n              children: \"Login Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 7\n  }, this);\n};\n\n_s(ManagementTools, \"X7RVkd0kKw4YRIswPBGBkUlvTD4=\");\n\n_c = ManagementTools;\nexport default ManagementTools;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManagementTools\");","map":{"version":3,"sources":["/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/management.component.js"],"names":["React","useEffect","useState","Link","Routes","Route","StoresDataService","SalesDataService","priceFormatter","ManagementTools","props","stores","setStores","numStores","setNumStores","currStore","setCurrStore","revenue","setRevenue","saved","setSaved","details","setDetails","displayDetails","setDisplayDetails","ranks","setRanks","retrieveLocations","retrieveSales","reload","length","listRevenue","listStores","forEach","loc","find","then","res","sales","data","Sales","revenuel","sale","items","item","parseInt","quantity","price","splice","det","location","at","rent","staff","numStaff","area","ROTE","salespa","val","R","retrieveDetails","catch","e","console","log","message","getStores","Stores","names","map","store","nextStore","next","prevStore","prev","loggedIn"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {Link,Routes,Route} from 'react-router-dom';\nimport StoresDataService from '../services/stores.js' ;\nimport SalesDataService from '../services/sales.js' ;\nimport priceFormatter from '../services/priceFormatter.js';\n\nconst ManagementTools = (props) => {\n    const [stores, setStores] = useState([])    \n    const [numStores, setNumStores] = useState(0)\n    const [currStore, setCurrStore] = useState(0)\n    const [revenue, setRevenue] = useState([])\n    const [saved, setSaved] = useState()\n    const [details, setDetails] = useState([])\n    const [displayDetails, setDisplayDetails] = useState([])\n    const [ranks, setRanks] = useState([])\n  \n  useEffect(() => {\n    retrieveLocations()\n    retrieveSales()    \n  }, [saved]); \n\n  const reload = () => {\n    setSaved(false);\n  }\n \n  const retrieveSales = () => {\n    if(stores.length>0) {\n      var listRevenue = []\n      var listStores = []\n      stores.forEach(loc=>{\n        SalesDataService.find(loc,\"location\")\n          .then(res=>{\n            const sales = res.data.Sales\n            var revenuel=0.0\n            sales.forEach(sale=>{\n              sale.items.forEach(item=>{\n                revenuel+=(parseInt(item.quantity)*item.price['$numberDecimal'])\n              })\n            })\n            \n            if(listRevenue.length===0) {\n              listRevenue = [revenuel]\n              listStores = [loc]\n            }\n            else {\n              listStores.splice(listRevenue.length, 0, loc)\n              listRevenue.splice(listRevenue.length, 0, revenuel)\n            }\n\n            details.forEach(det=>{\n              if(det.location===loc) {\n                  const sales = listRevenue.at(-1)\n                  const rent = det.rent['$numberDecimal']\n                  const staff = parseInt(det.numStaff)\n                  const area = parseInt(det.area)\n\n                  const ROTE = sales/staff \n                  const salespa = sales/area\n\n                  const val = R\n              }\n            })\n\n            if(listRevenue.length === numStores) {\n              setStores(listStores)\n              setRevenue(listRevenue)\n              retrieveDetails()\n            }\n\n          })\n          .catch(e=>{console.log(e.message);})\n\n\n      }) \n    }\n  }\n\n  const retrieveLocations = () => {\n    StoresDataService.getStores()\n      .then(res=>{\n        const data = res.data.Stores\n        const names=data.map(store=>{\n          return store.location\n        })\n        setDetails(data)\n        setStores(names)\n        setNumStores(res.data.Stores.length)  \n        reload()\n      })\n      .catch(e=>{console.log(e.message)})\n  }\n\n  const nextStore = e => {\n    const next = (currStore+1)%numStores\n    setCurrStore(next)\n    retrieveDetails()\n  }\n\n  const prevStore = e => {\n    const prev = (currStore>0?(currStore-1):(numStores-1))\n    setCurrStore(prev)\n    retrieveDetails()\n  }\n\n  const retrieveDetails = () => {\n    details.map(det=>{\n      if(det.location===stores[currStore]) {\n        setDisplayDetails(det)\n      }\n    })\n  }\n  \n    return (\n      <div>\n      <div className='row'></div>\n      <div className='row py-5'> {\n        props.loggedIn ? (\n            stores? (\n            <div class=\"container\">\n            <div className='row'>\n              <div className='col'>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-caret-left-fill\" viewBox=\"0 0 16 16\" onClick={prevStore}>\n                  <path d=\"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\"/>\n                </svg>\n              </div>\n              <div className='col-8'>\n                <div className='text-centre'>\n                  { \n                  revenue.length>0?                  \n                    <div>\n                      <h1>{stores[currStore]}</h1><h5>{revenue[currStore]}</h5>\n                      <div className=\"col-lg-4 pb-1\">\n                        <div className=\"card bg-dark text-white\">\n                          <div className=\"card-body p-5 text-centre\">\n                            <div class=\"mb-md-5 mt-md-4 pb-5\">\n                              <h2 class=\"fw-bold mb-2 text-uppercase\">STATS</h2>\n                              <div class=\"form-outline form-white mb-8\">   \n                                  <p>\n                                    <strong>Revenue : $</strong>{priceFormatter(parseInt(revenue[currStore]))+'\\n'}\n                                    <strong>Number of Staff : </strong>{parseInt(displayDetails.numStaff)+'\\n'}\n                                    <strong>ROTE ($/staff) :</strong> {priceFormatter(parseInt(revenue[currStore]/parseInt(displayDetails.numStaff)))+'\\n'}\n                                    <strong>Sales/Area($/sqft) :</strong>{priceFormatter(parseInt(revenue[currStore]/(displayDetails.area)))}\n                                  </p>\n                              </div>\n                              <div class=\"form-outline form-white mb-4\">\n                              </div>\n                            </div>\n                          </div>            \n                        </div>\n                      </div>\n                    </div>\n                    :\n                    null\n                  }\n                </div>\n              </div>\n              <div className='col'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-caret-right-fill\" viewBox=\"0 0 16 16\" onClick={nextStore}>\n                  <path d=\"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z\"/>\n                </svg>\n              </div>\n          </div>\n        </div>\n        ):<div>Not yet Loaded</div>\n        \n       ) :\n       (\n       <div class=\"jumbotron jumbotron-fluid\">\n         <div class=\"container\">\n           <h1 class=\"display-4\">Log In to continue</h1>\n           <p class=\"lead\">Head on to <Link to='/supply'>Login Page</Link></p>\n         </div>\n       </div>\n       )\n       }\n      </div>\n      </div>\n    );\n}\n\nexport default ManagementTools;"]},"metadata":{},"sourceType":"module"}