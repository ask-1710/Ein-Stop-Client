{"ast":null,"code":"var _jsxFileName = \"/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/management.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, Routes, Route } from 'react-router-dom';\nimport StoresDataService from '../services/stores.js';\nimport SalesDataService from '../services/sales.js';\nimport priceFormatter from '../services/priceFormatter.js';\nimport DatePicker from 'react-datepicker';\nimport Box from '@mui/material/Box';\nimport dayjs from 'dayjs';\nimport Popper from '@mui/material/Popper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ManagementTools = props => {\n  _s();\n\n  const [stores, setStores] = useState([]);\n  const [numStores, setNumStores] = useState(0);\n  const [currStore, setCurrStore] = useState(0);\n  const [revenue, setRevenue] = useState([]);\n  const [saved, setSaved] = useState();\n  const [details, setDetails] = useState([]);\n  const [displayDetails, setDisplayDetails] = useState(null);\n  const [ranks, setRanks] = useState([]);\n  const [stats, setStats] = useState([]);\n  const [rote, setROTE] = useState();\n  const [spa, setspa] = useState();\n  const [surpriseVisit, setSurpriseVisit] = useState(false);\n  const [minDate, setMinDate] = useState(new Date());\n  const [maxDate, setMaxDate] = useState(new Date() + 7);\n  const [DOV, setDOV] = useState(new Date());\n  const [visit, setVisit] = useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mailSent, setMailSent] = useState(false);\n  const open = Boolean(anchorEl);\n  const id = open ? 'simple-popper' : undefined;\n  useEffect(() => {\n    retrieveLocations();\n    retrieveSales();\n  }, [saved]);\n\n  const reload = () => {\n    setSaved(false);\n  };\n\n  const retrieveSales = () => {\n    if (stores.length > 0) {\n      var listRevenue = [];\n      var listStores = [];\n      var stats = [];\n      stores.forEach(loc => {\n        SalesDataService.find(loc, \"location\").then(res => {\n          const sales = res.data.Sales;\n          var revenuel = 0.0;\n          sales.forEach(sale => {\n            sale.items.forEach(item => {\n              revenuel += parseInt(item.quantity) * item.price['$numberDecimal'];\n            });\n          });\n\n          if (listRevenue.length === 0) {\n            listRevenue = [revenuel];\n            listStores = [loc];\n          } else {\n            listStores.splice(listRevenue.length, 0, loc);\n            listRevenue.splice(listRevenue.length, 0, revenuel);\n          }\n\n          details.forEach(det => {\n            if (det.location === loc) {\n              const sales = listRevenue.at(-1); // const rent = det.rent['$numberDecimal']\n\n              const staff = parseInt(det.numStaff);\n              const area = parseInt(det.area);\n              const ROTE = sales / staff;\n              const salespa = sales / area; // const val = ROTE+salespa-(rent*area)\n\n              stats.push({\n                'location': loc,\n                'rote': ROTE,\n                'salesByarea': salespa\n              });\n\n              if (loc === stores[currStore]) {\n                setDisplayDetails(det);\n              }\n            }\n          });\n\n          if (listRevenue.length === numStores) {\n            setStores(listStores);\n            setRevenue(listRevenue);\n            setStats(stats); // retrieveDetails(stores[currStore])\n          }\n        }).catch(e => {\n          console.log(e.message);\n        });\n      });\n    }\n  };\n\n  const retrieveLocations = () => {\n    StoresDataService.getStores().then(res => {\n      const data = res.data.Stores;\n      const names = data.map(store => {\n        return store.location;\n      });\n      setDetails(data);\n      setStores(names);\n      setNumStores(res.data.Stores.length);\n      reload();\n    }).catch(e => {\n      console.log(e.message);\n    });\n  };\n\n  const nextStore = e => {\n    const next = (currStore + 1) % numStores;\n    setCurrStore(next);\n    retrieveDetails(stores[next]);\n    setVisit(false);\n    setSurpriseVisit(false);\n    setDOV(new Date());\n  };\n\n  const prevStore = e => {\n    const prev = currStore > 0 ? currStore - 1 : numStores - 1;\n    setCurrStore(prev);\n    retrieveDetails(stores[prev]);\n    setVisit(false);\n    setSurpriseVisit(false);\n    setDOV(new Date());\n  };\n\n  const retrieveDetails = loc => {\n    stats.forEach(s => {\n      if (s.location === loc) {\n        setROTE(s.rote);\n        setspa(s.salesByarea);\n      }\n    });\n    details.forEach(det => {\n      if (det.location === loc) {\n        setDisplayDetails(det);\n        console.log(det);\n        console.log(stores[currStore]);\n      }\n    });\n  };\n\n  const OnChangeSetSurpriseVisit = e => {\n    const state = e.target.checked ? true : false;\n    setSurpriseVisit(state);\n  };\n\n  const OnChangeSetDOV = e => {\n    setDOV(e);\n    console.log(e);\n  };\n\n  const onClickSetVisit = () => {\n    setVisit(true);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n  };\n\n  const onSubmit = () => {\n    setMailSent(true);\n  };\n\n  const formatDate = date => {\n    const newDate = dayjs(date.toJSON());\n    return dayjs(newDate).format('DD-MMM-YYYY , HH:mm');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row py-5\",\n      children: props.loggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", stores ? /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row py-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-1\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                class: \"bi bi-caret-left-fill\",\n                viewBox: \"0 0 16 16\",\n                onClick: prevStore,\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 38\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-centre\",\n                children: revenue.length > 0 && displayDetails != null ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: stores[currStore]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-6 pb-4 py-5\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"card bg-dark text-white\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"card-body p-4 text-centre\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            class: \"mb-md-4 mt-md-4 pb-4\",\n                            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                              class: \"fw-bold mb-2 text-uppercase\",\n                              children: \"STATS\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 207,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              class: \"form-outline form-white mb-8 text-left-align medium-font\",\n                              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Revenue : $\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 210,\n                                  columnNumber: 39\n                                }, this), ' ' + priceFormatter(parseInt(revenue[currStore])) + '\\n', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 210,\n                                  columnNumber: 122\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"In staff : \"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 211,\n                                  columnNumber: 39\n                                }, this), ' ' + parseInt(displayDetails.numStaff) + '\\n', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 211,\n                                  columnNumber: 111\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"ROTE ($/staff) :\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 212,\n                                  columnNumber: 39\n                                }, this), \" \", ' ' + priceFormatter(parseInt(rote)) + '\\n', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 212,\n                                  columnNumber: 114\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Sales/area($/sqft) :\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 213,\n                                  columnNumber: 39\n                                }, this), ' ' + priceFormatter(parseInt(spa)) + '\\n', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 213,\n                                  columnNumber: 116\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 209,\n                                columnNumber: 37\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 208,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-6 pb-4 py-5\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"card bg-dark text-white\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"card-body p-4 text-centre\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            class: \"mb-md-4 mt-md-4 pb-4\",\n                            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                              class: \"fw-bold mb-2 text-uppercase\",\n                              children: \"MANAGER\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 224,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              class: \"form-outline form-white mb-6 text-left-align medium-font\",\n                              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Name : \"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 227,\n                                  columnNumber: 37\n                                }, this), ' ' + displayDetails.manager.name + '\\n', \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 227,\n                                  columnNumber: 102\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Age : \"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 228,\n                                  columnNumber: 37\n                                }, this), ' ' + displayDetails.manager.age + '\\n', \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 228,\n                                  columnNumber: 100\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Contact No. : \"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 229,\n                                  columnNumber: 37\n                                }, this), ' ' + displayDetails.manager.mobile + '\\n', \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 229,\n                                  columnNumber: 111\n                                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                  children: \"Cadre : \"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 230,\n                                  columnNumber: 37\n                                }, this), ' ' + displayDetails.manager.cadre + '\\n', \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 230,\n                                  columnNumber: 104\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 226,\n                                columnNumber: 37\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 225,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 223,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 222,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"btn\",\n                      children: \"Do you want to stop by this store anytime this week ?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      id: \"btn\",\n                      class: \"btn btn-outline-dark inline\",\n                      onClick: onClickSetVisit,\n                      children: \"Yes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: visit ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-left-align\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          children: \"Do you want to make it an uninformed visit ?\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 247,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"checkbox\",\n                          id: \"chekky\",\n                          class: \"regular-checkbox big-checkbox\",\n                          onChange: OnChangeSetSurpriseVisit\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 248,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"col-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 249,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          \"aria-describedby\": id,\n                          className: \"btn btn-outline-dark button-right-align\",\n                          for: \"chekky\",\n                          onClick: handleClick,\n                          children: \"To know more\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 250,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(Popper, {\n                          id: id,\n                          open: open,\n                          anchorEl: anchorEl,\n                          children: /*#__PURE__*/_jsxDEV(Box, {\n                            sx: {\n                              border: 1,\n                              p: 1,\n                              bgcolor: 'black',\n                              color: 'whitesmoke'\n                            },\n                            children: \"In case of an informed visit (default), the manager of the store will be alerted by mail about your visit. If this box for surprise visit is checked, the mail to the manager will not be generated\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 254,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 253,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          for: \"dov\",\n                          children: \"Select a day this week\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 260,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                          id: \"dov\",\n                          onChange: OnChangeSetDOV,\n                          selected: DOV,\n                          startDate: minDate,\n                          endDate: maxDate,\n                          showTimeSelect: true,\n                          className: \"input\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 261,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn btn-outline-dark button-right-align\",\n                          onClick: onSubmit,\n                          children: \"Confirm\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 270,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 259,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: mailSent ? /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"bold-green-font\",\n                            children: [\"Your next visit to \", stores[currStore], \" will be on \", formatDate(DOV)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 278,\n                            columnNumber: 33\n                          }, this), surpriseVisit ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"bold-green-font\",\n                            children: \"System generated mail sent to the store manager\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 283,\n                            columnNumber: 37\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 277,\n                          columnNumber: 31\n                        }, this) : null\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 274,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 25\n                    }, this) : null\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 22\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                class: \"bi bi-caret-right-fill\",\n                viewBox: \"0 0 16 16\",\n                onClick: nextStore,\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 36\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Not yet Loaded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"jumbotron jumbotron-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"display-4\",\n            children: \"Log In to continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"lead\",\n            children: [\"Head on to \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/supply\",\n              children: \"Login Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 7\n  }, this);\n};\n\n_s(ManagementTools, \"fFZWd2Hd/IkanpFnsVUKVwNO+AY=\");\n\n_c = ManagementTools;\nexport default ManagementTools;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManagementTools\");","map":{"version":3,"sources":["/home/aarthi/fitgit/react/einduch-stop/frontend/src/components/management.component.js"],"names":["React","useEffect","useState","Link","Routes","Route","StoresDataService","SalesDataService","priceFormatter","DatePicker","Box","dayjs","Popper","ManagementTools","props","stores","setStores","numStores","setNumStores","currStore","setCurrStore","revenue","setRevenue","saved","setSaved","details","setDetails","displayDetails","setDisplayDetails","ranks","setRanks","stats","setStats","rote","setROTE","spa","setspa","surpriseVisit","setSurpriseVisit","minDate","setMinDate","Date","maxDate","setMaxDate","DOV","setDOV","visit","setVisit","anchorEl","setAnchorEl","mailSent","setMailSent","open","Boolean","id","undefined","retrieveLocations","retrieveSales","reload","length","listRevenue","listStores","forEach","loc","find","then","res","sales","data","Sales","revenuel","sale","items","item","parseInt","quantity","price","splice","det","location","at","staff","numStaff","area","ROTE","salespa","push","catch","e","console","log","message","getStores","Stores","names","map","store","nextStore","next","retrieveDetails","prevStore","prev","s","salesByarea","OnChangeSetSurpriseVisit","state","target","checked","OnChangeSetDOV","onClickSetVisit","handleClick","event","currentTarget","onSubmit","formatDate","date","newDate","toJSON","format","loggedIn","manager","name","age","mobile","cadre","border","p","bgcolor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {Link,Routes,Route} from 'react-router-dom';\nimport StoresDataService from '../services/stores.js' ;\nimport SalesDataService from '../services/sales.js' ;\nimport priceFormatter from '../services/priceFormatter.js';\nimport DatePicker from 'react-datepicker';\nimport Box from '@mui/material/Box';\nimport dayjs from 'dayjs'\nimport Popper from '@mui/material/Popper';\n\nconst ManagementTools = (props) => {\n    const [stores, setStores] = useState([])    \n    const [numStores, setNumStores] = useState(0)\n    const [currStore, setCurrStore] = useState(0)\n    const [revenue, setRevenue] = useState([])\n    const [saved, setSaved] = useState()\n    const [details, setDetails] = useState([])\n    const [displayDetails, setDisplayDetails] = useState(null)\n    const [ranks, setRanks] = useState([])\n    const [stats, setStats] = useState([])\n    const [rote, setROTE] = useState()\n    const [spa, setspa] = useState()\n    const [surpriseVisit, setSurpriseVisit] = useState(false)\n    const [minDate, setMinDate] = useState(new Date())\n    const [maxDate, setMaxDate] = useState(new Date()+7)\n    const [DOV, setDOV] = useState(new Date())\n    const [visit, setVisit]=useState(false) \n    const [anchorEl, setAnchorEl] = React.useState(null)\n    const [mailSent, setMailSent] = useState(false)\n    \n    const open = Boolean(anchorEl);\n    const id = open ? 'simple-popper' : undefined;\n  \n  useEffect(() => {\n    retrieveLocations()\n    retrieveSales()    \n  }, [saved]); \n\n  const reload = () => {\n    setSaved(false);\n  }\n \n  const retrieveSales = () => {\n    if(stores.length>0) {\n      var listRevenue = []\n      var listStores = []\n      var stats = []\n      stores.forEach(loc=>{\n        SalesDataService.find(loc,\"location\")\n          .then(res=>{\n            const sales = res.data.Sales\n            var revenuel=0.0\n            sales.forEach(sale=>{\n              sale.items.forEach(item=>{\n                revenuel+=(parseInt(item.quantity)*item.price['$numberDecimal'])\n              })\n            })\n            \n            if(listRevenue.length===0) {\n              listRevenue = [revenuel]\n              listStores = [loc]\n            }\n            else {\n              listStores.splice(listRevenue.length, 0, loc)\n              listRevenue.splice(listRevenue.length, 0, revenuel)\n            }\n\n            details.forEach(det=>{\n              if(det.location===loc) {\n                  const sales = listRevenue.at(-1)\n                  // const rent = det.rent['$numberDecimal']\n                  const staff = parseInt(det.numStaff)\n                  const area = parseInt(det.area)\n\n                  const ROTE = sales/staff \n                  const salespa = sales/area\n\n                  // const val = ROTE+salespa-(rent*area)\n                  \n                  stats.push({'location':loc,'rote':ROTE,'salesByarea':salespa})\n\n                  if(loc===stores[currStore]) {\n                    setDisplayDetails(det)\n                  }\n                }\n            })\n\n\n            if(listRevenue.length === numStores) {\n              setStores(listStores)\n              setRevenue(listRevenue)\n              setStats(stats)\n              // retrieveDetails(stores[currStore])\n            }\n\n          })\n          .catch(e=>{console.log(e.message);})\n\n\n      }) \n    }\n  }\n\n  const retrieveLocations = () => {\n    StoresDataService.getStores()\n      .then(res=>{\n        const data = res.data.Stores\n        const names=data.map(store=>{\n          return store.location\n        })\n        setDetails(data)\n        setStores(names)\n        setNumStores(res.data.Stores.length)  \n        reload()\n      })\n      .catch(e=>{console.log(e.message)})\n  }\n\n  const nextStore = e => {\n    const next = (currStore+1)%numStores\n    setCurrStore(next)\n    retrieveDetails(stores[next])\n    setVisit(false)\n    setSurpriseVisit(false)\n    setDOV(new Date())\n  }\n\n  const prevStore = e => {\n    const prev = (currStore>0?(currStore-1):(numStores-1))\n    setCurrStore(prev)\n    retrieveDetails(stores[prev])\n    setVisit(false)\n    setSurpriseVisit(false)\n    setDOV(new Date())\n  }\n\n  const retrieveDetails = (loc) => {\n    stats.forEach(s=>{\n      if(s.location===loc) {\n        setROTE(s.rote)\n        setspa(s.salesByarea)\n      }\n    })\n    details.forEach(det=>{\n      if(det.location===loc) {\n        setDisplayDetails(det)\n        console.log(det)\n        console.log(stores[currStore])\n      }\n    })\n  }\n\n  const OnChangeSetSurpriseVisit = e => {\n    const state = (e.target.checked?true:false);\n    setSurpriseVisit(state)\n  } \n\n  const OnChangeSetDOV = e => {\n    setDOV(e)\n    console.log(e)\n  }\n\n  const onClickSetVisit = () => {\n    setVisit(true)\n  }\n\n  const handleClick = (event) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget);\n  }\n\n  const onSubmit = () => {\n    setMailSent(true)\n  }\n\n  const formatDate = (date) => {\n    const newDate=dayjs(date.toJSON())\n    return dayjs(newDate).format('DD-MMM-YYYY , HH:mm')\n  }\n\n    return (\n      <div>\n      <div className='row'></div>\n      <div className='row py-5'>\n      {\n        props.loggedIn ? (\n          <div> {\n            stores ? (\n            <div class=\"wrapper\">\n            <div className='row py-5'>\n              <div className='col-2'></div>  \n              <div className='col-1'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-caret-left-fill\" viewBox=\"0 0 16 16\" onClick={prevStore}>\n                  <path d=\"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\"/>\n                </svg>\n              </div>\n              <div className='col-6'>\n                <div className='text-centre'>\n                  {\n                  revenue.length>0 && displayDetails!=null?                \n                    (<div>\n                      <h1>{stores[currStore]}</h1>\n\n                      <div className='row'>\n                        <div className=\"col-lg-6 pb-4 py-5\">\n                          <div className=\"card bg-dark text-white\">\n                            <div className=\"card-body p-4 text-centre\">\n                              <div class=\"mb-md-4 mt-md-4 pb-4\">\n                                <h2 class=\"fw-bold mb-2 text-uppercase\">STATS</h2>\n                                <div class=\"form-outline form-white mb-8 text-left-align medium-font\">\n                                    <p>\n                                      <strong>Revenue : $</strong>{' '+priceFormatter(parseInt(revenue[currStore]))+'\\n'}<br/>\n                                      <strong>In staff : </strong>{' '+parseInt(displayDetails.numStaff)+'\\n'}<br/>\n                                      <strong>ROTE ($/staff) :</strong> {' '+priceFormatter(parseInt(rote))+'\\n'}<br/>\n                                      <strong>Sales/area($/sqft) :</strong>{' '+priceFormatter(parseInt(spa))+'\\n'}<br/>\n                                    </p>\n                                </div>\n                              </div>\n                            </div>            \n                          </div>\n                        </div>\n                        <div className=\"col-lg-6 pb-4 py-5\">\n                          <div className=\"card bg-dark text-white\">\n                            <div className=\"card-body p-4 text-centre\">\n                              <div class=\"mb-md-4 mt-md-4 pb-4\">\n                                <h2 class=\"fw-bold mb-2 text-uppercase\">MANAGER</h2>\n                                <div class=\"form-outline form-white mb-6 text-left-align medium-font\">\n                                    <p>\n                                    <strong>Name : </strong>{' '+(displayDetails.manager.name)+'\\n'} <br/>\n                                    <strong>Age : </strong>{' '+(displayDetails.manager.age)+'\\n'} <br/>\n                                    <strong>Contact No. : </strong>{' '+(displayDetails.manager.mobile)+'\\n'} <br/>\n                                    <strong>Cadre : </strong>{' '+(displayDetails.manager.cadre)+'\\n'} <br/>\n                                    </p>\n                                </div>\n                              </div>\n                            </div>            \n                          </div>\n                        </div>\n                      </div>\n                      <div className='input-group'>\n                      <label  for='btn'>Do you want to stop by this store anytime this week ?</label>\n                      <button type=\"button\" id='btn' class=\"btn btn-outline-dark inline\" onClick={onClickSetVisit}>Yes</button>  \n                      </div>\n                      <div>\n                      {\n                      visit? (\n                        <div className='text-left-align'>\n                            <div className='input-group'>\n                              <label>Do you want to make it an uninformed visit ?</label>\n                              <input type=\"checkbox\" id='chekky' class=\"regular-checkbox big-checkbox\" onChange={OnChangeSetSurpriseVisit} />\n                              <div className='col-1'></div>\n                              <button aria-describedby={id} className=\"btn btn-outline-dark button-right-align\" for='chekky' onClick={handleClick}>\n                                  To know more\n                                </button>\n                                <Popper id={id} open={open} anchorEl={anchorEl}>\n                                  <Box sx={{ border: 1, p: 1, bgcolor: 'black' , color: 'whitesmoke' }}>\n                                    In case of an informed visit (default), the manager of the store will be alerted by mail about your visit. If this box for surprise visit is checked, the mail to the manager will not be generated \n                                  </Box>\n                                </Popper>\n                              </div>\n                            <div className='input-group'> \n                              <label for='dov'>Select a day this week</label>                        \n                              <DatePicker\n                              id='dov'\n                                onChange={OnChangeSetDOV}\n                                selected={DOV}\n                                startDate={minDate}\n                                endDate={maxDate}\n                                showTimeSelect\n                                className='input'\n                              /> \n                              <button className=\"btn btn-outline-dark button-right-align\" onClick={onSubmit}>\n                                Confirm\n                              </button>\n                            </div>\n                            <div>\n                            {\n                            mailSent ? (\n                              <div> \n                                <div className='bold-green-font'>\n                                Your next visit to {stores[currStore]} will be on {formatDate(DOV)}\n                                </div>\n                                {\n                                  surpriseVisit?null:\n                                    <div className='bold-green-font'>\n                                      System generated mail sent to the store manager\n                                    </div>\n                                }\n                              </div>\n                            ):null\n                            }\n                          </div>\n                        </div>\n                    ):null\n                  }\n                      </div>\n                  </div>):null}\n                  </div>\n              </div>\n              <div className='col'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-caret-right-fill\" viewBox=\"0 0 16 16\" onClick={nextStore}>\n                  <path d=\"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z\"/>\n                </svg>\n              </div>\n            </div>\n          </div>\n          ):\n          (<div>Not yet Loaded</div>)    \n        }</div>    \n       ) :\n       (\n       <div class=\"jumbotron jumbotron-fluid\">\n         <div class=\"container\">\n           <h1 class=\"display-4\">Log In to continue</h1>\n           <p class=\"lead\">Head on to <Link to='/supply'>Login Page</Link></p>\n         </div>\n       </div>\n       )\n      }\n      </div>\n      </div>\n    \n      );\n}\n\nexport default ManagementTools;"]},"metadata":{},"sourceType":"module"}